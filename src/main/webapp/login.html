<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Employee Referral Portal</title>

<!-- CSS -->
<link rel="stylesheet" type="text/css" href="css/home.css">
<link rel="stylesheet" type="text/css" href="css/template.css">
<script src="https://apis.google.com/js/client:platform.js" async defer></script>
<script
	src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
<script>

function signinCallback(authResult) {
	  if (authResult['status']['signed_in']) {
	    // Update the app to reflect a signed in user
	    // Hide the sign-in button now that the user is authorized, for example:
	    document.getElementById('signinButton').setAttribute('style', 'display: none');
	    alert("successful");
	  } else {
	    // Update the app to reflect a signed out user
	    // Possible error values:
	    //   "user_signed_out" - User is signed-out
	    //   "access_denied" - User denied access to your app
	    //   "immediate_failed" - Could not automatically log in the user
	    console.log('Sign-in state: ' + authResult['error']);
	  }
	}
	
function onSignInCallback(resp) {
gapi.client.load('plus', 'v1', apiClientLoaded);
}

/**
* Sets up an API call after the Google API client loads.
*/
function apiClientLoaded() {
gapi.client.plus.people.get({userId: 'me'}).execute(handleEmailResponse);
}

/**
* Response callback for when the API client receives a response.
* @param resp The API response object with the user email and profile information.
*/
function handleEmailResponse(resp) {
	
var primaryEmail;
for (var i=0; i < resp.emails.length; i++) {
  if (resp.emails[i].type === 'account') primaryEmail = resp.emails[i].value;
}
$('#j_username').val(primaryEmail);
$('#j_password').val('referral');

sessionStorage.userId = primaryEmail;

document.getElementById('login-form').submit();

}
	function logout()
	{
		gapi.auth.signOut();

	}

</script>
</head>
<body class="login-body" >
	<!-- Header -->
<div class="pageDiv">
		<div class=headerDiv>
<div class="logoDiv"></div>
<div class="rightDiv"><br><h1 align="center">Employee Referral Portal</h1></div>
</div>
	</div>

	<div style="display: none">
		<form id="login-form" action="j_spring_security_check" method="post">
			<div class="center">
				<input type="text" name="j_username" id="j_username" maxlength="50" />
				<input type="password" name="j_password" id="j_password"
					maxlength="50" /> <input type="submit" value="Login"
					id="login-submit" />
			</div>
		</form>
	</div>

	
	<div class="page-container">
		<div class="loginDiv">
			<h1>Login</h1>
			<br>
			<button id="google-login-button" type="button"
				data-callback="onSignInCallback"
				data-clientid="609666609644-dd7hjkqfhb76ovst14l4gpf9pg8tpmk4.apps.googleusercontent.com"
				data-cookiepolicy="single_host_origin" data-theme="dark"
				data-scope="email" class="g-signin">Sign
				in with Google</button>
		</div>
	</div>
	
	<!-- <table>
    			 <tr>
					<td>		
						<div class="socialLoginLinks clearfix">  
							 <h1>Login via Nisum Id</h1>
							 <br> <br>
								<button id="google-login-button" 
									data-callback="onSignInCallback"
								    data-clientid="609666609644-dd7hjkqfhb76ovst14l4gpf9pg8tpmk4.apps.googleusercontent.com"
								    data-cookiepolicy="single_host_origin"
								    data-theme="dark"   
								    data-scope="email" class="g-signin btn-social btn-google">Sign in with Google</button> 
						</div>
					</td>
					<td width="30%">&nbsp;</td>
				</tr>
				
  		   </table>
  		   -->
	<!-- <a href="https://mail.google.com/mail/logout?hl=en">logout</a>
   			<input type="button" value="Logout" onclick="logout()">
            <br class="clear"/>
        -->




</body>
</html>